{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/.vscode/Libray%20Management%20system/Frontend/lib-sys/src/app/book/page.js"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { FaEdit, FaTrash, FaPlus } from \"react-icons/fa\";\n\nconst BookManager = () => {\n  const [booksData, setBooksData] = useState([]);\n  const [authors, setAuthors] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [editBookId, setEditBookId] = useState(null);\n  const [newBook, setNewBook] = useState({\n    bookName: \"\",\n    bookDescription: \"\",\n    bookAuthor: \"\",\n    bookCategory: \"\",\n    bookImage: \"\",\n    bookStatus: \"\",\n    bookCost: \"\",\n  });\n\n  useEffect(() => {\n    fetch(\"http://localhost:8800/api/book/getbook/\")\n      .then((response) => response.json())\n      .then((data) => setBooksData(data))\n      .catch((error) => console.error(\"Error fetching books:\", error));\n\n    fetch(\"http://localhost:8800/api/author\")\n      .then((response) => response.json())\n      .then((data) => setAuthors(data))\n      .catch((error) => console.error(\"Error fetching authors:\", error));\n\n    fetch(\"http://localhost:8800/api/genre\")\n      .then((response) => response.json())\n      .then((data) => setGenres(Array.isArray(data) ? data : []))\n      .catch((error) => console.error(\"Error fetching genres:\", error));\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setNewBook({ ...newBook, [name]: value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const url = editBookId\n      ? `http://localhost:8800/api/book/updatebook/${editBookId}`\n      : \"http://localhost:8800/api/book/addbook\";\n\n    fetch(url, {\n      method: editBookId ? \"PUT\" : \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newBook),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        if (editBookId) {\n          setBooksData((prevData) =>\n            prevData.map((book) => (book._id === editBookId ? data : book))\n          );\n        } else {\n          setBooksData((prevData) => [...prevData, data]);\n        }\n        setNewBook({\n          bookName: \"\",\n          bookDescription: \"\",\n          bookAuthor: \"\",\n          bookCategory: \"\",\n          bookImage: \"\",\n          bookStatus: \"\",\n          bookCost: \"\",\n        });\n        setEditBookId(null);\n        setShowForm(false);\n      })\n      .catch((error) => console.error(\"Error saving book:\", error));\n  };\n\n  const handleEdit = (book) => {\n    setNewBook(book);\n    setEditBookId(book._id);\n    setShowForm(true);\n  };\n\n  const handleDelete = (bookId) => {\n    fetch(`http://localhost:8800/api/book/deletebook/${bookId}`, {\n      method: \"DELETE\",\n    })\n      .then(() => {\n        setBooksData((prevData) => prevData.filter((book) => book._id !== bookId));\n      })\n      .catch((error) => console.error(\"Error deleting book:\", error));\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <h2 className=\"text-3xl font-semibold text-center mb-8\">Book Manager</h2>\n\n      {/* Add Book Button */}\n      <div className=\"flex justify-center mb-6\">\n        <button\n          onClick={() => setShowForm(!showForm)}\n          className=\"flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg\"\n        >\n          <FaPlus /> {showForm ? \"Close Form\" : \"Add Book\"}\n        </button>\n      </div>\n\n      {/* Add / Edit Book Form */}\n      {showForm && (\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-white shadow-md rounded-lg p-8 max-w-xl mx-auto\"\n        >\n          <h3 className=\"text-xl font-medium mb-6\">\n            {editBookId ? \"Edit Book\" : \"Add Book\"}\n          </h3>\n          <div className=\"space-y-6\">\n            <input\n              type=\"text\"\n              name=\"bookName\"\n              value={newBook.bookName}\n              onChange={handleChange}\n              placeholder=\"Book Name\"\n              className=\"w-full p-3 border rounded-lg\"\n            />\n            <textarea\n              name=\"bookDescription\"\n              value={newBook.bookDescription}\n              onChange={handleChange}\n              placeholder=\"Book Description\"\n              className=\"w-full p-3 border rounded-lg\"\n            />\n            <select\n              name=\"bookAuthor\"\n              value={newBook.bookAuthor}\n              onChange={handleChange}\n              className=\"w-full p-3 border rounded-lg\"\n            >\n              <option value=\"\">Select Author</option>\n              {authors.map((author) => (\n                <option key={author._id} value={author._id}>\n                  {author.name}\n                </option>\n              ))}\n            </select>\n            <select\n              name=\"bookCategory\"\n              value={newBook.bookCategory}\n              onChange={handleChange}\n              className=\"w-full p-3 border rounded-lg\"\n            >\n              <option value=\"\">Select Genre</option>\n              {genres.map((genre) => (\n                <option key={genre._id} value={genre._id}>\n                  {genre.name}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"text\"\n              name=\"bookImage\"\n              value={newBook.bookImage}\n              onChange={handleChange}\n              placeholder=\"Image URL\"\n              className=\"w-full p-3 border rounded-lg\"\n            />\n            <input\n              type=\"text\"\n              name=\"bookStatus\"\n              value={newBook.bookStatus}\n              onChange={handleChange}\n              placeholder=\"Book Status\"\n              className=\"w-full p-3 border rounded-lg\"\n            />\n            <input\n              type=\"number\"\n              name=\"bookCost\"\n              value={newBook.bookCost}\n              onChange={handleChange}\n              placeholder=\"Cost\"\n              className=\"w-full p-3 border rounded-lg\"\n            />\n            <button type=\"submit\" className=\"w-full p-3 bg-blue-600 text-white rounded-lg\">\n              {editBookId ? \"Update Book\" : \"Submit\"}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Books List */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8\">\n        {booksData.map((book) => (\n          <div key={book._id} className=\"bg-white border rounded-lg shadow-md p-6\">\n            <img\n              src={book.bookImage}\n              alt={book.bookName}\n              className=\"w-full h-48 object-cover rounded mb-4\"\n            />\n            <h3 className=\"text-lg font-semibold\">{book.bookName}</h3>\n            <p className=\"text-sm text-gray-700\">{book.bookDescription}</p>\n            <p className=\"text-sm text-gray-500\">\n              Author: {authors.find((a) => a._id === book.bookAuthor)?.name}\n            </p>\n            <div className=\"flex justify-between mt-4\">\n              <button onClick={() => handleEdit(book)} className=\"text-blue-500\">\n                <FaEdit size={20} />\n              </button>\n              <button onClick={() => handleDelete(book._id)} className=\"text-red-500\">\n                <FaTrash size={20} />\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default BookManager;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}